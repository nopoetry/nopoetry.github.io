<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>转载–Nginx基本功能及其原理 | Li buyan Blog</title><meta name="description" content="转载–Nginx基本功能及其原理"><meta name="keywords" content="Linux, Nginx"><meta name="author" content="Li buyan"><meta name="copyright" content="Li buyan"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/12/07/%E8%BD%AC%E8%BD%BD%E2%80%93Nginx%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E5%8F%8A%E5%85%B6%E5%8E%9F%E7%90%86/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="转载–Nginx基本功能及其原理"><meta property="og:url" content="http://yoursite.com/2020/12/07/%E8%BD%AC%E8%BD%BD%E2%80%93Nginx%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E5%8F%8A%E5%85%B6%E5%8E%9F%E7%90%86/"><meta property="og:site_name" content="Li buyan Blog"><meta property="og:description" content="转载–Nginx基本功能及其原理"><meta property="og:image" content="https://backiee.com/static/wpdb/wallpapers/1000x563/147982.jpg"><meta property="article:published_time" content="2020-12-07T02:50:00.000Z"><meta property="article:modified_time" content="2020-12-09T14:41:58.952Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-09 22:41:58'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.0.0"><link rel="alternate" href="/atom.xml" title="Li buyan Blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">35</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">32</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">22</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BD%AC%E8%BD%BD%E2%80%93Nginx%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E5%8F%8A%E5%85%B6%E5%8E%9F%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">转载–Nginx基本功能及其原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">一、什么是正向代理和反向代理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.</span> <span class="toc-text">二、Nginx配置文件的整体结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%8E%E5%9B%BE%E4%B8%AD%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA%E4%B8%BB%E8%A6%81%E5%8C%85%E5%90%AB%E4%BB%A5%E4%B8%8B%E5%87%A0%E5%A4%A7%E9%83%A8%E5%88%86%E5%86%85%E5%AE%B9%EF%BC%9A"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 从图中可以看出主要包含以下几大部分内容：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%9D%97"><span class="toc-number">1.2.2.</span> <span class="toc-text">全局块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events%E5%9D%97"><span class="toc-number">1.2.3.</span> <span class="toc-text">events块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%9D%97"><span class="toc-number">1.2.4.</span> <span class="toc-text">http块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server%E5%9D%97"><span class="toc-number">1.2.5.</span> <span class="toc-text">server块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#location%E5%9D%97"><span class="toc-number">1.2.6.</span> <span class="toc-text">location块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%80%E4%BB%BD%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95%E4%BE%8B%E6%9E%90"><span class="toc-number">1.2.7.</span> <span class="toc-text">2. 一份配置清单例析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E8%BF%90%E8%A1%8CNginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E6%88%B7%EF%BC%88%E7%BB%84%EF%BC%89"><span class="toc-number">1.2.8.</span> <span class="toc-text">3. 配置运行Nginx服务器用户（组）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-worker-process%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.9.</span> <span class="toc-text">4. worker_process数配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Nginx%E8%BF%9B%E7%A8%8BPID%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84"><span class="toc-number">1.2.10.</span> <span class="toc-text">5. Nginx进程PID存放路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E7%9A%84%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84"><span class="toc-number">1.2.11.</span> <span class="toc-text">6. 错误日志的存放路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%BC%95%E5%85%A5"><span class="toc-number">1.2.12.</span> <span class="toc-text">7. 配置文件的引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">1.2.13.</span> <span class="toc-text">8. 设置网络连接的序列化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E6%98%AF%E5%90%A6%E5%85%81%E8%AE%B8%E5%90%8C%E6%97%B6%E6%8E%A5%E6%94%B6%E5%A4%9A%E4%B8%AA%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.2.14.</span> <span class="toc-text">9. 是否允许同时接收多个网络连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9E%8B%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">1.2.15.</span> <span class="toc-text">10. 事件驱动模型的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.16.</span> <span class="toc-text">11. 最大连接数的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%AE%9A%E4%B9%89MIME-Type"><span class="toc-number">1.2.17.</span> <span class="toc-text">12. 定义MIME-Type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9C%8D%E5%8A%A1%E6%97%A5%E5%BF%97"><span class="toc-number">1.2.18.</span> <span class="toc-text">13. 自定义服务日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E5%85%81%E8%AE%B8sendfile%E6%96%B9%E5%BC%8F%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.19.</span> <span class="toc-text">14. 允许sendfile方式传输文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.20.</span> <span class="toc-text">15. 连接超时时间配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E5%8D%95%E8%BF%9E%E6%8E%A5%E8%AF%B7%E6%B1%82%E6%95%B0%E4%B8%8A%E9%99%90"><span class="toc-number">1.2.21.</span> <span class="toc-text">16. 单连接请求数上限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E7%9B%91%E5%90%AC"><span class="toc-number">1.2.22.</span> <span class="toc-text">17. 配置网络监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-%E5%9F%BA%E4%BA%8E%E5%90%8D%E7%A7%B0%E5%92%8CIP%E7%9A%84%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.23.</span> <span class="toc-text">18. 基于名称和IP的虚拟主机配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-location%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.24.</span> <span class="toc-text">19. location配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-%E8%AF%B7%E6%B1%82%E6%A0%B9%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.25.</span> <span class="toc-text">20. 请求根目录配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%AB%99%E7%9A%84%E9%BB%98%E8%AE%A4%E9%A6%96%E9%A1%B5"><span class="toc-number">1.2.26.</span> <span class="toc-text">21. 设置网站的默认首页</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Nginx%E9%85%8D%E7%BD%AESSL%E5%8F%8AHTTP%E8%B7%B3%E8%BD%AC%E5%88%B0HTTPS"><span class="toc-number">1.3.</span> <span class="toc-text">三、Nginx配置SSL及HTTP跳转到HTTPS</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://backiee.com/static/wpdb/wallpapers/1000x563/147982.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Li buyan Blog</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">转载–Nginx基本功能及其原理</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-07T02:50:00.000Z" title="发表于 2020-12-07 10:50:00">2020-12-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-09T14:41:58.952Z" title="更新于 2020-12-09 22:41:58">2020-12-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/Nginx/">Nginx</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="转载–Nginx基本功能及其原理"><a href="#转载–Nginx基本功能及其原理" class="headerlink" title="转载–Nginx基本功能及其原理"></a>转载–Nginx基本功能及其原理</h1><h2 id="一、什么是正向代理和反向代理："><a href="#一、什么是正向代理和反向代理：" class="headerlink" title="一、什么是正向代理和反向代理："></a><strong>一、什么是正向代理和反向代理：</strong></h2><p>A同学在大众创业的大时代背景下开启他的创业之路，目前他遇到的最大的一个问题就是启动资金，于是他决定去找马云爸爸借钱，可想而知，最后碰一鼻子灰回来了，情急之下，他想到一个办法，找关系开后门，经过一番消息打探，原来A同学的大学老师王老师是马云的同学，于是A同学找到王老师，托王老师帮忙去马云那借500万过来，当然最后事成了。不过马云并不知道这钱是A同学借的，马云是借给王老师的，最后由王老师转交给A同学。这里的王老师在这个过程中扮演了一个非常关键的角色，就是<strong>代理</strong>，也可以说是正向代理，王老师代替A同学办这件事，这个过程中，真正借钱的人是谁，马云是不知道的，这点非常关键。</p>
<p>我们常说的代理也就是只正向代理，正向代理的过程，它隐藏了真实的请求客户端，服务端不知道真实的客户端是谁，客户端请求的服务都被代理服务器代替来请求，某些科学上网工具扮演的就是典型的正向代理角色。用浏览器访问 <a target="_blank" rel="noopener" href="http://www.google.com/">http://www.google.com</a> 时，被残忍的block，于是你可以在国外搭建一台代理服务器，让代理帮我去请求<a target="_blank" rel="noopener" href="http://google.com/">google.com</a>，代理把请求返回的相应结构再返回给我。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15076797-bde7a6ba208db6d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/355/format/webp" alt="img"></p>
<p>图1.1： 正向代理示意图</p>
<p>大家都有过这样的经历，拨打10086客服电话，可能一个地区的10086客服有几个或者几十个，你永远都不需要关心在电话那头的是哪一个，叫什么，男的，还是女的，漂亮的还是帅气的，你都不关心，你关心的是你的问题能不能得到专业的解答，你只需要拨通了10086的总机号码，电话那头总会有人会回答你，只是有时慢有时快而已。那么这里的10086总机号码就是我们说的反向代理。客户不知道真正提供服务人的是谁。反向代理隐藏了真实的服务端，当我们请求<a target="_blank" rel="noopener" href="http://ww.baidu.com/">ww.baidu.com</a> 的时候，就像拨打10086一样，背后可能有成千上万台服务器为我们服务，但具体是哪一台，你不知道，也不需要知道，你只需要知道反向代理服务器是谁就好了，<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 就是我们的反向代理服务器，反向代理服务器会帮我们把请求转发到真实的服务器那里去。<strong>Nginx就是性能非常好的反向代理服务器，用来做负载均衡。</strong></p>
<p>两者的区别在于代理的对象不一样：  正向代理是为客户端代理，反向代理是为服务端代理。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15076797-836fda4f21d1575b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/263/format/webp" alt="img"></p>
<p>图1.2： 反向代理示意图</p>
<p>nginx能实现负载均衡，什么是负载均衡呢？就是我的项目部署在不同的服务器上，但是通过统一的域名进入，nginx则对请求进行分发，减轻了服务器的压力。</p>
<p>在上面这两种情况下，nginx服务器的作用都只是作为分发服务器，真正的内容，我们可以放在其他的服务器上，这样来，还能起到一层安全隔壁的作用，nginx作为隔离层。</p>
<p>其次，nginx还能解决跨域的问题。</p>
<h2 id="二、Nginx配置文件的整体结构"><a href="#二、Nginx配置文件的整体结构" class="headerlink" title="二、Nginx配置文件的整体结构"></a><strong>二、Nginx配置文件的整体结构</strong></h2><p><img src="https://upload-images.jianshu.io/upload_images/15076797-4c76f4a450116a67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/426/format/webp" alt="img"></p>
<p>图2.1： nginx配置文件的整体结构</p>
<h3 id="1-从图中可以看出主要包含以下几大部分内容："><a href="#1-从图中可以看出主要包含以下几大部分内容：" class="headerlink" title="1. 从图中可以看出主要包含以下几大部分内容："></a>1. 从图中可以看出主要包含以下几大部分内容：</h3><ul>
<li><h3 id="全局块"><a href="#全局块" class="headerlink" title="全局块"></a>全局块</h3></li>
</ul>
<p>该部分配置主要影响Nginx全局，通常包括下面几个部分：</p>
<p>配置运行Nginx服务器用户（组）<br> worker process数<br> Nginx进程PID存放路径<br> 错误日志的存放路径<br> 配置文件的引入</p>
<ul>
<li><h3 id="events块"><a href="#events块" class="headerlink" title="events块"></a>events块</h3></li>
</ul>
<p>该部分配置主要影响Nginx服务器与用户的网络连接，主要包括：</p>
<p>设置网络连接的序列化<br> 是否允许同时接收多个网络连接<br> 事件驱动模型的选择<br> 最大连接数的配置</p>
<ul>
<li><h3 id="http块"><a href="#http块" class="headerlink" title="http块"></a>http块</h3></li>
</ul>
<p>定义MIMI-Type<br> 自定义服务日志<br> 允许sendfile方式传输文件<br> 连接超时时间<br> 单连接请求数上限</p>
<ul>
<li><h3 id="server块"><a href="#server块" class="headerlink" title="server块"></a>server块</h3></li>
</ul>
<p>配置网络监听<br> 基于名称的虚拟主机配置<br> 基于IP的虚拟主机配置</p>
<ul>
<li><h3 id="location块"><a href="#location块" class="headerlink" title="location块"></a>location块</h3></li>
</ul>
<p>location配置<br> 请求根目录配置<br> 更改location的URI<br> 网站默认首页配置</p>
<h3 id="2-一份配置清单例析"><a href="#2-一份配置清单例析" class="headerlink" title="2. 一份配置清单例析"></a>2. 一份配置清单例析</h3><p>按照前面文章，给出一份简要的清单配置举例：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15076797-31fe6a33fd2fcaf2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/615/format/webp" alt="img"></p>
<p>图2.1：nginx配置举例</p>
<h3 id="3-配置运行Nginx服务器用户（组）"><a href="#3-配置运行Nginx服务器用户（组）" class="headerlink" title="3. 配置运行Nginx服务器用户（组）"></a>3. 配置运行Nginx服务器用户（组）</h3><p>指令格式：user user [group];</p>
<p>user：指定可以运行Nginx服务器的用户</p>
<p>group：可选项，可以运行Nginx服务器的用户组</p>
<p>如果user指令不配置或者配置为 user nobody nobody ，则默认所有用户都可以启动Nginx进程</p>
<h3 id="4-worker-process数配置"><a href="#4-worker-process数配置" class="headerlink" title="4. worker_process数配置"></a>4. worker_process数配置</h3><p>Nginx服务器实现并发处理服务的关键，指令格式：worker_processes number | auto;</p>
<p>number：Nginx进程最多可以产生的worker process数</p>
<p>auto：Nginx进程将自动检测</p>
<p>按照上文中的配置清单的实验，我们给worker_processes配置的数目是：3，启动Nginx服务器后，我们可以后台看一下主机上的Nginx进程情况：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ps -aux | grep nginx</span><br></pre></td></tr></table></figure>

<p>很明显，理解 worker_processes 这个指令的含义就很容易了</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15076797-039c8d1ac24d23d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/645/format/webp" alt="img"></p>
<p>图2.2：查看nginx进程情况</p>
<h3 id="5-Nginx进程PID存放路径"><a href="#5-Nginx进程PID存放路径" class="headerlink" title="5. Nginx进程PID存放路径"></a>5. Nginx进程PID存放路径</h3><p>Nginx进程是作为系统守护进程在运行，需要在某文件中保存当前运行程序的主进程号，Nginx支持该保存文件路径的自定义</p>
<p>指令格式：pid file;</p>
<p>file：指定存放路径和文件名称</p>
<p>如果不指定默认置于路径 logs/nginx.pid</p>
<h3 id="6-错误日志的存放路径"><a href="#6-错误日志的存放路径" class="headerlink" title="6. 错误日志的存放路径"></a>6. 错误日志的存放路径</h3><p>指定格式：error_log file | stderr;</p>
<p>file：日志输出到某个文件file</p>
<p>stderr：日志输出到标准错误输出</p>
<h3 id="7-配置文件的引入"><a href="#7-配置文件的引入" class="headerlink" title="7. 配置文件的引入"></a><strong>7. 配置文件的引入</strong></h3><p>指令格式：include file;</p>
<p>该指令主要用于将其他的Nginx配置或者第三方模块的配置引用到当前的主配置文件中</p>
<h3 id="8-设置网络连接的序列化"><a href="#8-设置网络连接的序列化" class="headerlink" title="8. 设置网络连接的序列化"></a><strong>8. 设置网络连接的序列化</strong></h3><p>指令格式：accept_mutex on | off;</p>
<p>该指令默认为on状态，表示会对多个Nginx进程接收连接进行序列化，防止多个进程对连接的争抢。</p>
<p>说到该指令，首先得阐述一下什么是所谓的”惊群问题”，可以参考 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Thundering_herd_problem">WIKI百科的解释</a>。就Nginx的场景来解释的话大致的意思就是：当一个新网络连接来到时，多个worker进程会被同时唤醒，但仅仅只有一个进程可以真正获得连接并处理之。如果每次唤醒的进程数目过多的话，其实是会影响一部分性能的。</p>
<p>所以在这里，如果accept_mutex on，那么多个worker将是以串行方式来处理，其中有一个worker会被唤醒；反之若accept_mutex off，那么所有的worker都会被唤醒，不过只有一个worker能获取新连接，其它的worker会重新进入休眠状态</p>
<p>这个值的开关与否其实是要和具体场景挂钩的。</p>
<h3 id="9-是否允许同时接收多个网络连接"><a href="#9-是否允许同时接收多个网络连接" class="headerlink" title="9. 是否允许同时接收多个网络连接"></a><strong>9. 是否允许同时接收多个网络连接</strong></h3><p>指令格式：multi_accept on | off;</p>
<p>该指令默认为off状态，意指每个worker process 一次只能接收一个新到达的网络连接。若想让每个Nginx的worker process都有能力同时接收多个网络连接，则需要开启此配置</p>
<h3 id="10-事件驱动模型的选择"><a href="#10-事件驱动模型的选择" class="headerlink" title="10. 事件驱动模型的选择"></a><strong>10. 事件驱动模型的选择</strong></h3><p>指令格式：use model;</p>
<p>model模型可选择项包括：select、poll、kqueue、epoll、rtsig等……</p>
<h3 id="11-最大连接数的配置"><a href="#11-最大连接数的配置" class="headerlink" title="11. 最大连接数的配置"></a><strong>11. 最大连接数的配置</strong></h3><p>指令格式：worker_connections number;</p>
<p>number默认值为512，表示允许每一个worker process可以同时开启的最大连接数</p>
<h3 id="12-定义MIME-Type"><a href="#12-定义MIME-Type" class="headerlink" title="12. 定义MIME-Type"></a><strong>12. 定义MIME-Type</strong></h3><p>指令格式：</p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line">include mime.types;default_type mime-<span class="class"><span class="keyword">type</span>;</span></span><br></pre></td></tr></table></figure>

<p>MIME-Type指的是网络资源的媒体类型，也即前端请求的资源类型</p>
<p>include指令将mime.types文件包含进来</p>
<p>cat mime.types 来查看mime.types文件内容，我们发现其就是一个types结构，里面包含了各种浏览器能够识别的MIME类型以及对应类型的文件后缀名字，如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/15076797-a982a324d2da3bf7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/591/format/webp" alt="img"></p>
<h3 id="13-自定义服务日志"><a href="#13-自定义服务日志" class="headerlink" title="13. 自定义服务日志"></a><strong>13. 自定义服务日志</strong></h3><p>指令格式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">access_log</span> <span class="selector-tag">path</span> <span class="selector-attr">[format]</span>;</span><br></pre></td></tr></table></figure>

<p>path：自定义服务日志的路径 + 名称</p>
<p>format：可选项，自定义服务日志的字符串格式。其也可以使用 log_format 定义的格式</p>
<h3 id="14-允许sendfile方式传输文件"><a href="#14-允许sendfile方式传输文件" class="headerlink" title="14. 允许sendfile方式传输文件"></a><strong>14. 允许sendfile方式传输文件</strong></h3><p>指令格式：</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">sendfile <span class="keyword">on</span> | off;sendfile_max_chunk size;</span><br></pre></td></tr></table></figure>

<p>前者用于开启或关闭使用sendfile()传输文件，默认off</p>
<p>后者指令若size&gt;0，则Nginx进程的每个worker process每次调用sendfile()传输的数据了最大不能超出此值；若size=0则表示不限制。默认值为0</p>
<h3 id="15-连接超时时间配置"><a href="#15-连接超时时间配置" class="headerlink" title="15. 连接超时时间配置"></a><strong>15. 连接超时时间配置</strong></h3><p>指令格式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">keepalive_timeout</span> <span class="selector-tag">timeout</span> <span class="selector-attr">[header_timeout]</span>;</span><br></pre></td></tr></table></figure>

<p>timeout 表示server端对连接的保持时间，默认75秒</p>
<p>header_timeout 为可选项，表示在应答报文头部的 Keep-Alive 域设置超时时间：”Keep-Alive : timeout = header_timeout”</p>
<h3 id="16-单连接请求数上限"><a href="#16-单连接请求数上限" class="headerlink" title="16. 单连接请求数上限"></a><strong>16. 单连接请求数上限</strong></h3><p>指令格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">keepalive_requests number;</span><br></pre></td></tr></table></figure>

<p>该指令用于限制用户通过某一个连接向Nginx服务器发起请求的次数</p>
<h3 id="17-配置网络监听"><a href="#17-配置网络监听" class="headerlink" title="17. 配置网络监听"></a><strong>17. 配置网络监听</strong></h3><p>指令格式：</p>
<p>第一种：配置监听的IP地址：listen IP[:PORT];</p>
<p>第二种：配置监听的端口：listen PORT;</p>
<p>实际举例：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">listen</span> 192<span class="selector-class">.168</span><span class="selector-class">.31</span><span class="selector-class">.177</span><span class="selector-pseudo">:8080</span>;   # 监听具体<span class="selector-tag">IP</span>和具体端口上的连接</span><br><span class="line"><span class="selector-tag">listen</span> 192<span class="selector-class">.168</span><span class="selector-class">.31</span><span class="selector-class">.177</span>;   # 监听<span class="selector-tag">IP</span>上所有端口上的连接</span><br><span class="line"><span class="selector-tag">listen</span> 8080;     # 监听具体端口上的所有<span class="selector-tag">IP</span>的连接</span><br></pre></td></tr></table></figure>

<h3 id="18-基于名称和IP的虚拟主机配置"><a href="#18-基于名称和IP的虚拟主机配置" class="headerlink" title="18. 基于名称和IP的虚拟主机配置"></a><strong>18. 基于名称和IP的虚拟主机配置</strong></h3><p>指令格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server_name name1 name2 ...</span><br></pre></td></tr></table></figure>

<p>name可以有多个并列名称，而且此处的name支持正则表达式书写</p>
<p>实际举例：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">server_name ~^www\d+\.myserver\.com$</span><br></pre></td></tr></table></figure>

<p>此时表示该虚拟主机可以接收类似域名 <a target="_blank" rel="noopener" href="http://www1.myserver.com/">www1.myserver.com</a> 等的请求而拒绝 <a target="_blank" rel="noopener" href="http://www.myserver.com/">www.myserver.com</a> 的域名请求，所以说用正则表达式可以实现更精准的控制</p>
<p>至于基于IP的虚拟主机配置比较简单，不再太赘述：</p>
<p>指令格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server_name IP地址</span><br></pre></td></tr></table></figure>

<h3 id="19-location配置"><a href="#19-location配置" class="headerlink" title="19. location配置"></a><strong>19. location配置</strong></h3><p>指令格式为：</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">location [ = <span class="params">| ~ |</span> ~* <span class="params">| ^~ ] uri &#123;...&#125;</span></span><br></pre></td></tr></table></figure>

<p>这里的<code>uri</code>分为标准uri和正则uri，两者的唯一区别是uri中是否包含正则表达式(<strong>URI</strong>，是uniform resource identifier，统一资源标识符，用来唯一的标识一个资源。而<strong>URL</strong>是uniform resource locator，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。)</p>
<p>uri前面的方括号中的内容是可选项，解释如下：</p>
<p><code>&quot;=&quot;</code>：用于标准uri前，要求请求字符串与uri严格匹配，一旦匹配成功则停止</p>
<p><code>&quot;~&quot;</code>：用于正则uri前，并且区分大小写</p>
<p><code>&quot;~*&quot;</code>：用于正则uri前，但不区分大小写</p>
<p><code>&quot;^~&quot;</code>：用于标准uri前，要求Nginx找到标识uri和请求字符串匹配度最高的location后，立即使用此location处理请求，而不再使用location块中的正则uri和请求字符串做匹配</p>
<h3 id="20-请求根目录配置"><a href="#20-请求根目录配置" class="headerlink" title="20. 请求根目录配置"></a><strong>20. 请求根目录配置</strong></h3><p>指令格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">root path;</span><br></pre></td></tr></table></figure>

<p>path：Nginx接收到请求以后查找资源的根目录路径</p>
<p>当然，还可以通过alias指令来更改location接收到的URI请求路径，指令为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">alias</span> path; <span class="comment"># path为修改后的根路径</span></span><br></pre></td></tr></table></figure>

<h3 id="21-设置网站的默认首页"><a href="#21-设置网站的默认首页" class="headerlink" title="21. 设置网站的默认首页"></a><strong>21. 设置网站的默认首页</strong></h3><p>指令格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">index file ......</span><br></pre></td></tr></table></figure>

<p><code>file</code>可以包含多个用空格隔开的文件名，首先找到哪个页面，就使用哪个页面响应请求</p>
<p>其实Nginx的配置真的是很简单，对于新手们来说其实最大的问题就是Nginx所有的配置都是基于配置文件和各个模块语法的，这些看着给人的感觉好复杂的样子，其实理解了各个模块的意义和基本语法后就变的尤为简单了！</p>
<h2 id="三、Nginx配置SSL及HTTP跳转到HTTPS"><a href="#三、Nginx配置SSL及HTTP跳转到HTTPS" class="headerlink" title="三、Nginx配置SSL及HTTP跳转到HTTPS"></a><strong>三、Nginx配置SSL及HTTP跳转到HTTPS</strong></h2><p>随着微信小程序和appstore对ssl安全的需求，越来越多的网站和app需要支持SSL功能，需要开启https的方式来打开网站或传输数据。</p>
<p>ssl证书网上可以找到收费和免费的申请，nginx配置如下：</p>
<p>Nginx配置SSL并把Http跳转到Https，需要修改Nginx.conf配置文件：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Settings for a TLS enabled server.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果是http请求默认访问80端口，此时return强行301重定向到https://www.joyitsai.com</span></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">  listen <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">  server_name www.joyitsai.com;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">301</span> https:<span class="comment">//www.joyitsai.com$request_uri;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 把http重定向到https使用了nginx的重定向命令，之前老版本的nginx可能使用了以下类似的格式：</span></span><br><span class="line">  <span class="comment"># rewrite ^/(.*)$ http://www.joyitsai.com/$1 permanent;</span></span><br><span class="line">  <span class="comment"># 或者：</span></span><br><span class="line">  <span class="comment"># rewrite ^ http://www.joyitsai.com$request_uri? permanent;</span></span><br><span class="line">  <span class="comment"># 现在nginx新版本已经换了种写法，上面这些已经不再推荐。现在网上可能还有很多文章写的是第一种。</span></span><br><span class="line">  <span class="comment"># 新的写法比较推荐方式是：return 301 https://www.joyitsai.com$request_uri;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">  listen <span class="number">443</span>;</span><br><span class="line">  server_name www.joyitsai.com;</span><br><span class="line">  root /data/release/weapp/uploadFiles;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 开启ssl功能</span></span><br><span class="line">  ssl on;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 配置ssl证书，直接用.pem和.key文件的绝对路径</span></span><br><span class="line"></span><br><span class="line">  ssl_certificate/data/release/nginx/<span class="number">1535530361992.</span>pem;</span><br><span class="line"></span><br><span class="line">  ssl_certificate_key/data/release/nginx/<span class="number">1535530361992.</span>key;</span><br><span class="line"></span><br><span class="line">  ssl_session_timeout <span class="number">5</span>m;</span><br><span class="line"></span><br><span class="line">  ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;</span><br><span class="line"></span><br><span class="line">  ssl_ciphers ECDHE - RSA - AES128 - GCM - SHA256: ECDHE: ECDH: AES: HIGH: !<span class="literal">NULL</span>: !aNULL: !MD5: !ADH: !RC4;</span><br><span class="line"></span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line"></span><br><span class="line">     proxy_pass http:<span class="comment">//app_weapp;</span></span><br><span class="line"></span><br><span class="line">     proxy_http_version <span class="number">1.1</span>;</span><br><span class="line"></span><br><span class="line">     proxy_set_header Upgrade $http_upgrade;</span><br><span class="line"></span><br><span class="line">     proxy_set_header Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line"></span><br><span class="line">     proxy_set_header Host $host;</span><br><span class="line"></span><br><span class="line">     proxy_cache_bypass $http_upgrade;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location /images/ &#123;</span><br><span class="line">    autoindex on;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 配置uri， ~用于正则uri前，其中.(png|jpg)为正则表达式，如果后缀是.png或.jpg的url请求，则匹配成功</span></span><br><span class="line">  <span class="comment"># root用于配置接收到请求以后查找资源的根目录路径</span></span><br><span class="line"></span><br><span class="line">  location ~ \.(png|jpg) &#123;</span><br><span class="line">     root /data/release/weapp/uploadFiles;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page <span class="number">404</span> /<span class="number">404.</span>html;</span><br><span class="line"></span><br><span class="line">  location = /<span class="number">40</span>x.html &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> /<span class="number">50</span>x.html;</span><br><span class="line"></span><br><span class="line">  location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>作者：0mei<br>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d8bd75c0fb1b">https://www.jianshu.com/p/d8bd75c0fb1b</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">libuyan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/12/07/%E8%BD%AC%E8%BD%BD%E2%80%93Nginx%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E5%8F%8A%E5%85%B6%E5%8E%9F%E7%90%86/">http://yoursite.com/2020/12/07/%E8%BD%AC%E8%BD%BD%E2%80%93Nginx%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E5%8F%8A%E5%85%B6%E5%8E%9F%E7%90%86/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Li buyan Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Nginx/">Nginx</a></div><div class="post_share"><div class="social-share" data-image="https://backiee.com/static/wpdb/wallpapers/1000x563/147982.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/09/%E8%BD%AC%E8%BD%BD-Linux%E4%BF%9D%E5%AD%98git%E5%AF%86%E7%A0%81/"><img class="prev-cover" data-lazy-src="https://backiee.com/static/wpdb/wallpapers/1000x563/189510.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux保存git密码</div></div></a></div><div class="next-post pull-right"><a href="/2020/12/07/Linux%E9%85%8D%E7%BD%AENginx%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A8/"><img class="next-cover" data-lazy-src="https://backiee.com/static/wpdb/wallpapers/1000x563/031672.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux配置Nginx图片服务器</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/12/06/Linux下配置Nginx/" title="Linux下配置Nginx"><img class="relatedPosts_cover" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-06</div><div class="relatedPosts_title">Linux下配置Nginx</div></div></a></div><div class="relatedPosts_item"><a href="/2020/12/07/Linux配置Nginx图片服务器/" title="Linux配置Nginx图片服务器"><img class="relatedPosts_cover" data-lazy-src="https://backiee.com/static/wpdb/wallpapers/1000x563/031672.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-07</div><div class="relatedPosts_title">Linux配置Nginx图片服务器</div></div></a></div><div class="relatedPosts_item"><a href="/2021/01/11/Nginx配置语法详解/" title="Nginx配置语法详解"><img class="relatedPosts_cover" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-11</div><div class="relatedPosts_title">Nginx配置语法详解</div></div></a></div><div class="relatedPosts_item"><a href="/2020/12/06/转载-Nginx-配置-HTTPS-服务器/" title="转载-Nginx 配置 HTTPS 服务器"><img class="relatedPosts_cover" data-lazy-src="https://backiee.com/static/wpdb/wallpapers/1000x563/158354.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-06</div><div class="relatedPosts_title">转载-Nginx 配置 HTTPS 服务器</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/11/Linux下安装maven/" title="Linux下安装maven"><img class="relatedPosts_cover" data-lazy-src="https://backiee.com/static/wpdb/wallpapers/1000x563/188851.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-11</div><div class="relatedPosts_title">Linux下安装maven</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/11/国内镜像源/" title="国内镜像源"><img class="relatedPosts_cover" data-lazy-src="https://backiee.com/static/wpdb/wallpapers/1000x563/189510.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-11</div><div class="relatedPosts_title">国内镜像源</div></div></a></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Li buyan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Welcome to Li buyan Blog!</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div></body></html>